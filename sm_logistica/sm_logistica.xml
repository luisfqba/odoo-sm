<?xml version="1.0"?>
<openerp>
    <data>
	<!-- Vista para pedidos en Recepción -->
        <record id="sm_logistica_so_tree_view" model="ir.ui.view">
            <field name="name">sm.logistica.so.tree.view</field>
            <field name="model">sale.order</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Sale Order" colors="grey:state=='cancel';blue:state in ('waiting_date','manual');red:state in ('invoice_except','shipping_except')">
                    <field name="name"/>
                    <field name="date_order"/>
                    <field name="client_order_ref"/>
                    <field name="partner_id"/>
                    <field name="user_id"/>
                    <field name="sm_state" string="Estado"/>
                    <field name="sm_carrier_id"/>
                    <field name="state"/>
                    <field name="note"/>
                </tree>
            </field>
        </record>

	<!-- Vista para pedidos Vista Logistica -->
        <record id="sm_logistica_log_tree_view" model="ir.ui.view">
            <field name="name">sm.logistica.log.tree.view</field>
            <field name="model">sale.order</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Sale Order" colors="grey:state=='cancel';blue:state in ('waiting_date','manual');red:state in ('invoice_except','shipping_except')">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="client_order_ref"/>
                    <field name="partner_shipping_id"/>
                    <field name="sm_state" string="Estado"/>
                    <!-- <field name="carrier_shipped_date"/>   Fecha entrega de mercancia -->
                    <field name="carrier_delivery_date"/>
                    <field name="sm_carrier_id" string="Transportista"/>                    
                    <field name="carrier_ref"/>        <!-- Guia de Embarque -->
                    <field name="re_carrier_ref"/>     <!-- Guia de Reembarque -->
                    <field name="state"/>
                </tree>
            </field>
        </record>	

	    <!-- Vista para Todos los pedidos -->
        <record id="sm_logistica_allso_tree_view" model="ir.ui.view">
            <field name="name">sm.logistica.allso.tree.view</field>
            <field name="model">sale.order</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Sale Order" colors="grey:state=='cancel';blue:state in ('waiting_date','manual');red:state in ('invoice_except','shipping_except')">
                    <field name="name"/>
                    <field name="date_order"/>
                    <field name="client_order_ref"/>
                    <field name="partner_id"/>
                    <field name="user_id"/>
                    <field name="partner_shipping_id"/>
                    <field name="carrier_ref"/>
                    <field name="sm_state" string="Estado"/>
                    <field name="sm_carrier_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
    
	<!-- Vista Search para pedidos  -->
        <record model='ir.ui.view' id='sm_logistica_so_search_view'>
            <field name='name'>sm.logistica.so.search.view</field>
            <field name='type'>search</field>
            <field name='model'>sale.order</field>
            <field name='arch' type='xml'>
                <search string="Search Sales Order">
                    <group>
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="partner_id" filter_domain="[('partner_id', 'child_of', self)]"/>
                        <field name="sm_state"/>
                        <field name="carrier_ref"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Customer" icon="terp-personal" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter string="Salesperson" icon="terp-personal" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter string="Status" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Order Date" icon="terp-go-month" domain="[]" context="{'group_by':'date_order'}"/>
                        <filter string="Transportista" context="{'group_by': 'sm_carrier_id'}" icon="terp-stock"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="logistica_so_tree_action">
	        <field name="name">Pedidos en Recepción</field>
	        <field name="res_model">sale.order</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form,calendar,graph</field>
	        <field name="view_id" ref="sm_logistica_so_tree_view"/>
            <field name='search_view_id' ref='sm_logistica_so_search_view' />
            <field name="domain">[('sm_state','in',('created','approved', 'inreview', 'invoiced', 'stopped'))]</field>
	    </record>

        <record model="ir.actions.act_window" id="logistica_log_tree_action">
	        <field name="name">Pedidos Logistica</field>
	        <field name="res_model">sale.order</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form,calendar,graph</field>
	        <field name="view_id" ref="sm_logistica_log_tree_view"/>
            <field name='search_view_id' ref='sm_logistica_so_search_view' />
            <field name="domain">[('sm_state','in',('shipping',))]</field>
	    </record>

        <record model="ir.actions.act_window" id="logistica_all_tree_action">
	        <field name="name">Todos los Pedidos</field>
	        <field name="res_model">sale.order</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form,calendar,graph</field>
	        <field name="view_id" ref="sm_logistica_allso_tree_view"/>
            <field name='search_view_id' ref='sm_logistica_so_search_view' />
	    </record>

        <!-- Almacén -->
        <record model="ir.ui.view" id="sm_logistica_sp_tree_view">
            <field name='name'>Salidas de Almacen</field>
            <field name='model'>stock.picking</field>
            <field name='type'>tree</field>
            <field name='inherit_id' ref='stock.view_picking_out_tree'/>
            <field name='arch' type="xml">
                <tree string="Delivery Orders">
                    
                </tree>
            </field>
        </record>
        <!-- Vista Search para Salidas de Almacen  -->
        <record model='ir.ui.view' id='sm_logistica_sp_search_view'>
            <field name='name'>sm.logistica.sp.search.view</field>
            <field name='type'>search</field>
            <field name='model'>stock.picking</field>
            <field name='arch' type='xml'>
                <search string="Search Salidas de Almacen">
                    <group>
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="partner_id"/>
                        <field name="origin"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By">
                        <filter string="partner_id" context="{'group_by': 'partner_id'}" icon="terp-partner"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="logistica_sp_tree_action">
	        <field name="name">Salidas de Almacén</field>
	        <field name="res_model">stock.picking</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form</field>
            <!-- <field name='search_view_id' ref='stock.picking.out.search' /> -->
            <!-- <field name="view_id" ref="teq_logistica_sp_tree_view"/> -->
            <field name="view_id" ref="stock.view_picking_out_tree"/>
            <field name="domain">[('type','=','out')]</field>
            <!-- <field name="context">{'default_type': 'out', 'contact_display': 'partner_address', 'search_default_confirmed': 1, 'search_default_available': 1}</field> -->
	    </record>

<!-- FACTURACION -->

<!-- MENU LOGISTICA / FACTURACION / FACTURAS DE CLIENTE -->
    <record model="ir.actions.act_window" id="logistica_invoice_tree_action">
	        <field name="name">Facturas de Clientes</field>
	        <field name="res_model">account.invoice</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter" />
            <field name="domain">[('type','=','out_invoice')]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale'}</field>
	    </record>

        <record model="ir.actions.act_window.view" id="logistica_invoice_view_treeview">
            <field name="sequence" eval="1" />
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="logistica_invoice_tree_action"/> 
        </record>
        
        <record model="ir.actions.act_window.view" id="logistica_invoice_view_view">
            <field name="sequence" eval="2" />
            <field name="view_mode">form</field>
            <field name="view_id" ref="account.invoice_form"/>
            <field name="act_window_id" ref="logistica_invoice_tree_action"/> 
        </record>
<!-- FIN FACTURAS DE CLIENTES -->

<!-- MENU LOGISTCA / FACTURACION / NOTAS DE CREDITO -->
        <record model="ir.actions.act_window" id="logistica_notascredito_tree_action">
	        <field name="name">Notas de Credito</field>
	        <field name="res_model">account.invoice</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter" />
            <field name="domain">[('type','=','out_refund')]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund'}</field>
	    </record>

        <record model="ir.actions.act_window.view" id="logistica_notascredito_view_treeview">
            <field name="sequence" eval="1" />
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="logistica_notascredito_tree_action"/> 
        </record>
        
        <record model="ir.actions.act_window.view" id="logistica_notascredito_view_view">
            <field name="sequence" eval="2" />
            <field name="view_mode">form</field>
            <field name="view_id" ref="account.invoice_form"/>
            <field name="act_window_id" ref="logistica_notascredito_tree_action"/> 
        </record>
    
<!-- FIN NOTAS DE CREDITO -->

	    <menuitem id="logistica_menu_id" name="Logistica" action="logistica_so_tree_action" web_icon="images/logistica.png" web_icon_hover="images/logistica-hover.png"/>
        <menuitem id="logistica_root_sales_order" name="Pedidos" parent="logistica_menu_id" />
	    <menuitem id="logistica_sales_order" name="Pedido en Recepción" action="logistica_so_tree_action" parent="logistica_root_sales_order"/>
	    <menuitem id="logistica_log_sales_order" name="Pedidos Logistica" action="logistica_log_tree_action" parent="logistica_root_sales_order"/>
        <menuitem id="logistica_all_sales_order" name="Todos los pedidos" action="logistica_all_tree_action" parent="logistica_root_sales_order"/>
        
        <menuitem id="logistica_root_almacen" name="Almacén" parent="logistica_menu_id"/>
        <menuitem id="logistica_salidas_almacen" name="Salidas de Almacén" action="logistica_sp_tree_action" parent="logistica_root_almacen"/>

        <menuitem id="logistica_root_facturacion" name="Facturacion" parent="logistica_menu_id"/> 
        <menuitem id="logistica_facturas" name="Facturas de Clientes" parent="logistica_root_facturacion" action="logistica_invoice_tree_action"/>
        <menuitem id="logistica_notas_credito" name="Notas de Credito" parent="logistica_root_facturacion" action="logistica_notascredito_tree_action"/>
    </data>
</openerp>
<!-- # vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4: -->
